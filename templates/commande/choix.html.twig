{% extends 'base.html.twig' %}

{% block title %}Mon panier{% endblock %}

{% block body %}
<div class="container">
    <h2 class="text-center m-5">Recapitulatif de ma commande</h2>
    <p class="text-center m-5">Choisissez votre adresse de livraison et le mode de livraison.</p>
    <hr>
    <div class="row">
        <div class="col-md-6 confirm-section">
            {% set formHtml %}
            {{form_start(form, {path:'recapitulatif'})}}
            {{form_end(form)}}
            {% endset %}
            <!-- <b>Choisir mon adresse de livraison</b><br> -->
            {{ formHtml|replace({'[br]' : '<br/>', '[€]' : '€'})|raw }}

            <!-- <b>Choisir mon adresse de facturation</b> -->
        </div>
        <div class="col-md-6 confirm-section">
            <b>Récapitulatif de ma commande</b><br>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Produit</th>
                        <th scope="col">Quantité</th>
                        <th scope="col">Prix</th>
                        <th scope="col">Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% set total = null %}
                    {% for produit in panier %}
                    <tr>

                        <td>{{produit.produit.nom}}</td>
                        <td> {{produit.quantite}}</td>
                        <td>{{produit.produit.MontantHt}}€ </td>
                        <td>{{ produit.produit.MontantHt * produit.quantite}}€ </td>

                    </tr>
                    {% set total = total + (produit.produit.montantHt * produit.quantite) %}
                    {% endfor %}
                </tbody>
            </table>
            <a href="{{path('paiement')}}" class="btn btn-primary">Payer {{ total }} €</a>
        </div>
    </div>
</div>
{% endblock %}